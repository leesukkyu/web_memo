!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){!function(t){t.fn.extend({drag:function(){let e,n;return function(i){let o,s,r;o=({end:end=null,start:start=null,move:move=null}=i),s=function(i){t.isFunction(o.end)&&o.move({x:i.clientX-e,y:i.clientY-n})},r=function(){t.isFunction(o.end)&&o.end(),t(document).off("mouseup",r).off("mousemove",s)},this.on("mousedown",(function(i){t.isFunction(o.start)&&o.start(),e=i.clientX,n=i.clientY,t(document).on("mousemove",s).on("mouseup",r)}))}}()})}(jQuery)},function(t,e,n){"use strict";n.r(e);n(0);class i{static model(){return{uuid:null,width:0,height:0,cords:{x:0,y:0},contents:null,$el:null,map:null}}constructor(t={}){this.option=Object.assign(i.model(),t),this.init()}init(){this.uuid=this.option.uuid||this.getUUID(),this.create(),this.activate()}create(){this.createDOM(),this.setEventListener(),this.setDragable()}remove(){this.option.map.remove=this.uuid,this.$el.remove()}createDOM(){this.$el=$(this.getTemplate(this.option)),this.$el.appendTo(this.option.$wrap)}getTemplate({width:t,height:e,contents:n,cords:i}){return`\n            <div class="memo" style="top:${i.y}px;left:${i.x}px">\n                <div data-move class="header">\n                    <h1 class="blind">메모장</h1>\n                    <button data-close-btn class="btn_close"><span class="blind">닫기</span></button>\n                </div>\n                <div class="content">\n                    <div data-textarea class="textarea" contenteditable="true" style="width:${t}px; height:${e}px">\n                        ${n}\n                    </div>\n                    <button data-resize-btn class="btn_size"><span class="blind">메모장 크기 조절</span></button>\n                </div>\n            </div>\n        `}getUUID(){let t,e;return t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}setEventListener(){this.$el.on("click","[data-close-btn]",t=>{this.remove()}),this.$el.on("click",t=>{this.activate()}),this.$el.find("[data-textarea]").on("focus",t=>{this.activate()}).on("keyup",t=>{this.option.contents=$(t.target).html()}).on("blur",()=>{this.option.map.change()})}setDragable(){this.$el.find("[data-move]").drag({start:()=>{this.activate()},move:t=>{this.clearSelection(),this.$el.css({left:this.option.cords.x+t.x+"px",top:this.option.cords.y+t.y+"px"})},end:()=>{i.isErrorPoition(this)?(this.$el.addClass("rollback"),this.$el.css({left:this.option.cords.x+"px",top:this.option.cords.y+"px"}),setTimeout(()=>{this.$el.removeClass("rollback")},320)):(this.option.cords.x=parseInt(this.$el.css("left"),10),this.option.cords.y=parseInt(this.$el.css("top"),10),this.option.map.change())}}),this.$el.find("[data-resize-btn]").drag({start:()=>{this.activate()},move:t=>{this.clearSelection(),this.$el.find("[data-textarea]").css({width:this.option.width+t.x+"px",height:this.option.height+t.y+"px"})},end:()=>{this.option.width=parseInt(this.$el.find("[data-textarea]").css("width"),10),this.option.height=parseInt(this.$el.find("[data-textarea]").css("height"),10),this.option.map.change()}})}activate(){let t;t=this.option.map.entries;for(let[e,n]of t)n.$el.removeClass("active");this.option.map[this.uuid]&&this.option.map[this.uuid].$el.addClass("active")}clearSelection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}static isErrorPoition(t){return parseInt(t.$el.css("top"),10)<0||parseInt(t.$el.css("top"),10)+50>t.option.$wrap.height()||parseInt(t.$el.css("left"),10)+50>t.option.$wrap.width()||parseInt(t.$el.css("left"),10)+t.$el.width()-50<0}}class o{constructor(t){this.option=t,this.proxyMap=null,this.externSaveFn_=null,this.externList_=null,this.init()}init(){this.proxyMap=o.createProxyMap(),Reflect.setPrototypeOf(this.proxyMap,{change:function(){this.save()}.bind(this)}),this.setEventListener()}setEventListener(){this.option.$wrap.on("contextmenu",t=>{t.preventDefault(),t.target==this.option.$wrap[0]&&this.onMouseRightClick.call(this,t)}),$(window).on("beforeunload",t=>{this.onBeforeunload.call(this,t)})}onMouseRightClick(t){let e,n;t.preventDefault(),e=$(t.target).offset(),n={x:t.pageX-e.left,y:t.pageY-e.top},this.createMemo(n)}onBeforeunload(t){this.save()}createMemo(t){let e;e=new i({$wrap:this.option.$wrap,map:this.proxyMap,width:this.option.width,height:this.option.height,contents:this.option.contents,cords:t}),this.insertDataToMap(e)}insertDataToMap(t){t instanceof Map?this.proxyMap.assign=t:this.proxyMap[t.uuid]=t}createMemoByExternList(t){let e,n;n=new Map;for(let o in t)e=new i({$wrap:this.option.$wrap,map:this.proxyMap,width:t[o].width,height:t[o].height,contents:t[o].contents,cords:t[o].cords,uuid:t[o].uuid}),n.set(t[o].uuid,e);this.insertDataToMap(n)}save(){let t,e,n,i;e=0,t=[],n=this.proxyMap.entries;for(let[o,s]of n)i=s.option,t[e++]={uuid:s.uuid,width:i.width,height:i.height,cords:i.cords,contents:i.contents};this.externSaveFn_&&this.externSaveFn_(t)}set externList(t){this.createMemoByExternList(t)}get externList(){return this.proxyMap}set externSaveFn(t){this.externSaveFn_=t}get externSaveFn(){return this.externSaveFn_}static createProxyMap(){return new Proxy(new Map,{get:(t,e,...n)=>"entries"===e?t.entries():t.has(e)?t.get(e):t[e],set(t,e,n){if("remove"===e)t.delete(n);else if("clear"==e)!0===n&&t.clear();else if("assign"===e)for(let[e,i]of n)t.set(e,i);else t.set(e,n);return t.change(),!0},setPrototypeOf(t,e){for(let n in e)t[n]=e[n];return!1}})}static removeAllData(t){try{for(let e in t){let n;n=t[e].proxyMap.entries;for(let[t,e]of n)e.$el.remove();t[e].proxyMap.clear=!0}}catch(t){console.log(t)}}}var s=function(){let t,e;return{init:t=function(t=({$wrap:$wrap=null,width:width=200,height:height=100,contents:contents="",mapData:mapData=new Map,cords:cords={x:0,y:0}}={})){return new o(t)},removeAllData:e=function(){o.removeAllData(arguments[0])}}}();var r={set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}};$((function(){let t;const e=200,n=100,i="메모를 입력하세요.";(t={init:function(){this.startMemo()},startMemo:function(){let t,o=[];return t=function(){$('<button class="btn_remove">모든 쪽지 데이터 삭제 하기</button>').click(()=>{s.removeAllData(o)}).appendTo($("body"))},function(){let a,l,c;l=s.init({$wrap:$("#wrap"),width:e,height:n,contents:i}),a=r.get("wrap"),l.externList=JSON.parse(a),l.externSaveFn=function(t){r.set("wrap",JSON.stringify(t))},c=s.init({$wrap:$("#wrap2"),width:e,height:n,contents:i}),a=r.get("wrap2"),c.externList=JSON.parse(a),c.externSaveFn=function(t){r.set("wrap2",JSON.stringify(t))},o.push(l),o.push(c),t.call(this)}}()}).init()}))}]);